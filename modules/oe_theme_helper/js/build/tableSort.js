!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.tableSort=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";o.d(r,{default:()=>n});var e=o("ckeditor5/src/core.js");class t extends e.Command{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection),r=o.length>0;this.isEnabled=r&&o.every((e=>this._isInFirstHeadingRow(e,e.parent.parent))),this.value=this.isEnabled&&o.every((e=>e.hasAttribute("sortable")))}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection);t.change((e=>{for(const t of o)this.value?e.removeAttribute("sortable",t):e.setAttribute("sortable","true",t)}))}_isInFirstHeadingRow(e,t){return!!parseInt(t.getAttribute("headingRows")||"0")&&0===e.parent.index}}class l extends e.Plugin{init(){const e=this.editor,o=e.model,r=o.schema,l=e.conversion;r.extend("tableCell",{allowAttributes:"sortable"}),l.for("upcast").attributeToAttribute({view:{name:"th",key:"data-sortable"},model:"sortable"}),l.for("editingDowncast").attributeToAttribute({model:{name:"tableCell",key:"sortable"},view:{key:"class",value:["cell-sortable"]}}),l.for("dataDowncast").attributeToAttribute({model:{name:"tableCell",key:"sortable"},view:"data-sortable"}),e.commands.add("toggleTableColumnSort",new t(e));const s=o.document;s.registerPostFixer((e=>{const t=s.differ.getChanges();for(const r of t){const{type:t,attributeKey:l,attributeNewValue:s}=r;if("attribute"!==t||"headingRows"!==l||s)continue;const a=r.range.start.nodeAfter;if(a&&a.is("element","table"))for(const t of o.createRangeOn(a).getItems())t.is("element","tableCell")&&e.removeAttribute("sortable",t)}return!1}))}}var s=o("ckeditor5/src/ui.js");class a extends e.Plugin{static get pluginName(){return"TableSortUi"}init(){const e=this.editor;e.ui.componentFactory.add("toggleTableColumnSort",(t=>{const o=e.commands.get("toggleTableColumnSort"),r=new s.ButtonView(t);return r.set({icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path clip-rule="evenodd" d="M6.431 14.46a.445.445 0 0 0 .446-.445V3.494L9.685 6.3a.446.446 0 0 0 .63-.631L6.748 2.1a.446.446 0 0 0-.631 0l-3.57 3.57a.446.446 0 0 0 .631.63l2.807-2.806v10.52c0 .247.2.447.446.447Z"/><path clip-rule="evenodd" d="M5.444 14.015a.988.988 0 0 0 1.975 0V4.8l1.883 1.883a.988.988 0 0 0 1.396-1.397L7.13 1.718a.988.988 0 0 0-1.397 0L2.164 5.287a.988.988 0 0 0 1.397 1.397L5.444 4.8v9.214ZM6.03 2.954l.401-.402.402.402a.54.54 0 0 0-.402.232.541.541 0 0 0-.401-.232Zm4.038 2.964Z"/><path d="M13.569 5.54c.246 0 .446.199.446.445v10.521l2.807-2.807a.446.446 0 0 1 .63.631l-3.567 3.57a.446.446 0 0 1-.63 0l-3.57-3.569a.446.446 0 1 1 .631-.63l2.808 2.806V5.986c0-.247.2-.447.446-.447Z"/><path clip-rule="evenodd" d="M12.58 5.985a.988.988 0 1 1 1.976 0V15.2l1.883-1.883a.988.988 0 0 1 1.397 1.397l-3.569 3.569a.988.988 0 0 1-1.397 0l-3.568-3.569a.988.988 0 1 1 1.396-1.397l1.883 1.883V5.985Zm.587 11.061.402.402.401-.402a.54.54 0 0 1-.401-.232.54.54 0 0 1-.402.232Zm4.038-2.964Z"/></svg>',tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",(e=>e?Drupal.t("Toggle column sort off"):Drupal.t("Toggle column sort on"))),this.listenTo(r,"execute",(()=>{e.execute("toggleTableColumnSort"),e.editing.view.focus()})),r}))}}class i extends e.Plugin{static get requires(){return[l,a]}}const n={TableSort:i}})(),r=r.default})()));