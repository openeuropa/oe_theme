!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.tableSort=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,o)=>{e.exports=o("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function o(r){var l=t[r];if(void 0!==l)return l.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";o.d(r,{default:()=>n});var e=o("ckeditor5/src/core.js");class t extends e.Command{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection),r=o.length>0;this.isEnabled=r&&o.every((e=>this._isInFirstHeadingRow(e,e.parent.parent))),this.value=this.isEnabled&&o.every((e=>e.hasAttribute("sortable")))}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection);t.change((e=>{for(const t of o)this.value?e.removeAttribute("sortable",t):e.setAttribute("sortable","true",t)}))}_isInFirstHeadingRow(e,t){return!!parseInt(t.getAttribute("headingRows")||"0")&&0===e.parent.index}}class l extends e.Plugin{init(){const e=this.editor,o=e.model,r=o.schema,l=e.conversion;r.extend("tableCell",{allowAttributes:"sortable"}),l.for("upcast").attributeToAttribute({view:{name:"th",key:"data-sortable"},model:"sortable"}),l.for("editingDowncast").attributeToAttribute({model:{name:"tableCell",key:"sortable"},view:{key:"class",value:["cell-sortable"]}}),l.for("dataDowncast").attributeToAttribute({model:{name:"tableCell",key:"sortable"},view:"data-sortable"}),e.commands.add("toggleTableColumnSort",new t(e));const a=o.document;a.registerPostFixer((e=>{const t=a.differ.getChanges();for(const r of t){const{type:t,attributeKey:l,attributeNewValue:a}=r;if("attribute"!==t||"headingRows"!==l||a)continue;const s=r.range.start.nodeAfter;if(s&&s.is("element","table"))for(const t of o.createRangeOn(s).getItems())t.is("element","tableCell")&&e.removeAttribute("sortable",t)}return!1}))}}var a=o("ckeditor5/src/ui.js");class s extends e.Plugin{static get pluginName(){return"TableSortUi"}init(){const e=this.editor;e.ui.componentFactory.add("toggleTableColumnSort",(t=>{const o=e.commands.get("toggleTableColumnSort"),r=new a.ButtonView(t);return r.set({icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path clip-rule="evenodd" d="M12.459 16.569a.26.26 0 0 0 .258-.26V10.2l1.63 1.63a.26.26 0 0 0 .367-.366L12.642 9.39a.26.26 0 0 0-.367 0l-2.072 2.073a.259.259 0 1 0 .366.367l1.63-1.63v6.11a.26.26 0 0 0 .26.259Z"/><path clip-rule="evenodd" d="M11.885 16.31a.574.574 0 1 0 1.147 0v-5.351l1.093 1.093a.574.574 0 0 0 .812-.811l-2.073-2.073a.574.574 0 0 0-.811 0L9.98 11.241a.574.574 0 0 0 .811.81l1.094-1.092v5.35Zm.34-6.424.234-.234.233.234a.313.313 0 0 0-.233.135.315.315 0 0 0-.234-.135Zm2.345 1.721Z"/><path d="M16.604 11.387a.26.26 0 0 1 .259.26v6.11l1.63-1.63a.259.259 0 1 1 .367.366l-2.073 2.072a.259.259 0 0 1-.366 0l-2.073-2.072a.259.259 0 1 1 .366-.367l1.63 1.63v-6.11a.26.26 0 0 1 .26-.259Z"/><path clip-rule="evenodd" d="M16.03 11.646a.574.574 0 0 1 1.147 0v5.351l1.094-1.093a.574.574 0 0 1 .81.811l-2.072 2.073a.574.574 0 0 1-.811 0l-2.073-2.073a.574.574 0 0 1 .812-.811l1.093 1.093v-5.35Zm.34 6.424.234.234.233-.234a.314.314 0 0 1-.233-.135.315.315 0 0 1-.234.135Zm2.345-1.721Z"/><path opacity="0.6" clip-rule="evenodd" d="M8 2v5h2.496a8.519 8.519 0 0 0-1.474 1H8v1.022a8.519 8.519 0 0 0-1 1.474V8H2V7h5V2h1ZM6.374 12H2v1h4.132c.06-.34.142-.675.242-1ZM13 6.132V2h-1v4.374c.325-.1.66-.181 1-.242Z"/><path clip-rule="evenodd" d="M17.5 1h-15A1.5 1.5 0 0 0 1 2.5v15A1.5 1.5 0 0 0 2.5 19h4.788c-.2-.32-.38-.654-.536-1H2V2h16v4.752c.346.156.68.336 1 .536V2.5A1.5 1.5 0 0 0 17.5 1Z"/><path d="M9 1v18a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1ZM7 2H3v4h4V2Zm0 6H3v4h4V8Zm0 6H3v4h4v-4Z"/></svg>',tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",(e=>e?Drupal.t("Toggle column sort off"):Drupal.t("Toggle column sort on"))),this.listenTo(r,"execute",(()=>{e.execute("toggleTableColumnSort"),e.editing.view.focus()})),r}))}}class i extends e.Plugin{static get requires(){return[l,s]}}const n={TableSort:i}})(),r=r.default})()));