{#
/**
 * @file
 * Theme override for the corporate European Union Standardised footer block.
 *
 * Available variables:
 * - site_owner: Site's owner.
 * - site_specific_footer: renderable array for site specific footer links
 * - corporate_footer: renderable array for corporate footer links
 * @see ./module/contrib/oe_corporate_blocks/templates/oe-corporate-blocks-eu-footer.html.twig
 */
#}

{% extends "@oe_theme/navigation/oe-corporate-blocks-ec-footer--standardised.html.twig" %}

{% block content %}
  {# Populate the top row with the site identity and the custom links. #}
  {% set _top_row_links = [] %}
  {% if accessibility_link is not empty %}
    {% set _top_row_links = {
      links: {
        link: {
          label: 'Accessibility'|t,
          path: accessibility_link,
          external: accessibility_link|is_external_url,
          icon_path: ecl_icon_path,
        },
        extra_attributes: [
          {
            name: 'data-is-accessibility-link',
            value: 'true',
          }
        ],
      }
    } %}
  {% endif %}

  {% set _top_row = [
    [
      {
        'title': {
          'link': {
            'label': site_specific_footer.site_identity,
            'path': url('<front>'),
          }
        },
        'description': site_owner ? 'This site is managed by:<br />@name'|t({'@name': site_owner}),
        'links': _top_row_links,
        'section_class_name': 'ecl-site-footer__section--site-info',
      }
    ],
    _top_left_column,
    _top_right_column
  ] %}
  {# Populate the bottom row with the corporate links. #}
  {% set _bottom_row = [
    [
      {
        'logo': {
          'path': path,
          'language': current_language_id,
          'src_mobile': mobile_logo_path,
          'src_desktop': desktop_logo_path,
          'title': 'European Union'|t,
          'alt': 'European Union flag'|t,
          'aria_label': 'Home'|t ~ ' - ' ~ 'European Union'|t,
        },
        'description': logo_description,
      },
    ],
    [
      {
        'title': corporate_footer.contact_title,
        'links': ecl_footer_links(corporate_footer.contact),
        'title_with_separator': false,
      },
      {
        'title': corporate_footer.social_media_title,
        'links': ecl_footer_links(corporate_footer.social_media),
        'title_with_separator': false,
      },
    ],
    [
      {
        'title': corporate_footer.legal_links_title,
        'links': ecl_footer_links(corporate_footer.legal_links),
        'title_with_separator': false,
      },
      {
        'title': corporate_footer.institution_links_title,
        'links': ecl_footer_links(corporate_footer.institution_links),
        'title_with_separator': false,
      }
    ],
  ] %}

  {% include '@ecl-twig/site-footer' with {
    'rows': [ _top_row, _bottom_row],
  } %}
{% endblock %}
